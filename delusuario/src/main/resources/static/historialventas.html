<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="historialventas.css">
  <link rel="icon" type="image/x-icon" href="imgs/Icon-modified.png">
  <title>Jardín Sublime</title>
</head>
<body>
<div class="container">
  <div class="sidebar">
    <ul>
      <hr>
      <li><a href="#">Inicio</a></li>
      <hr>
      <li><a href="#">Productos</a></li>
      <hr>
      <li><a href="#">Inventario</a></li>
      <hr>
      <li><a href="#">Ventas</a></li>
      <hr>
      <li><a href="#">Clientes</a></li>
      <hr>
      <li><a href="file:///C:/Users/semed/Desktop/delusuario/delusuario/src/main/resources/static/Login/login.html">Configuración</a></li>
      <hr>
      <li><a href="http://localhost:8080/login.html">Cerrar sesión</a></li>
      <hr>
    </ul>
  </div>
  <div class="content">
    <table>
      <thead>
      <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Cantidad vendida</th>
        <th>Fecha de la venta</th>
      </tr>
      </thead>
      <tbody id="productosTable">

      </tbody>
    </table>
  </div>
</div>
<script>
  fetch('/historial/venta')
          .then(response => response.json())
          .then(data => {
            const table = document.querySelector('table');
            data.forEach(venta => {
              fetch(`/producto/${venta.id_venta}`)
                      .then(response => response.json())
                      .then(producto => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
              <td>${venta.id_venta}</td>
              <td>${producto.nombre}</td>
              <td>${venta.cantidad_venta}</td>
              <td>${venta.fecha_venta}</td>
            `;
                        table.appendChild(row);
                      })
                      .catch(error => {
                        console.log('Error al obtener el nombre del producto:', error);
                      });
            });
          })
          .catch(error => {
            console.log('Error al obtener la lista de ventas:', error);
          });
</script>
</body>
</html>
